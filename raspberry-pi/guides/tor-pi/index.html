<!-- Elements added to main will be displayed on all pages --> <!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Raspberry Pi - Raspberry Pi Tor Access Point Guide, Tor proxy, Raspberry Pi 2, Raspberry Pi 3, Raspberry Pi 4"><meta name=author content="Stas Yakobov"><link href=https://3os.org/raspberry-pi/guides/tor-pi/ rel=canonical><link rel=icon href=../../../assets/favicon.png><meta name=generator content="mkdocs-1.2.2, mkdocs-material-7.2.5"><title>TorPi - Raspberry Pi Tor Access Point - 3os</title><link rel=stylesheet href=../../../assets/stylesheets/main.be71726b.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.3f5d1f46.min.css><link rel=stylesheet href=../../../theme/css/fonts.css><link rel=stylesheet href=../../../theme/css/extra.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent> <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#torpi-raspberry-pi-tor-access-point class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=3os class="md-header__button md-logo" aria-label=3os data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 2.05c5.05.5 9 4.77 9 9.95 0 1.45-.32 2.83-.88 4.07l-2.62-1.53c.32-.79.5-1.64.5-2.54 0-3.53-2.61-6.43-6-6.92V2.05M12 19c2.21 0 4.17-1 5.45-2.62l2.6 1.53A9.97 9.97 0 0 1 12 22C6.47 22 2 17.5 2 12a9.99 9.99 0 0 1 9-9.95v3.03C7.61 5.57 5 8.47 5 12a7 7 0 0 0 7 7m0-13a6 6 0 0 1 6 6c0 2.97-2.16 5.44-5 5.92v-3.09c1.17-.41 2-1.52 2-2.83a3 3 0 0 0-3-3l-.55.05-1.54-2.67C10.56 6.13 11.26 6 12 6m-6 6c0-1.86.85-3.5 2.18-4.62l1.54 2.67C9.27 10.57 9 11.26 9 12c0 1.31.83 2.42 2 2.83v3.09c-2.84-.48-5-2.95-5-5.92z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 3os </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> TorPi - Raspberry Pi Tor Access Point </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=blue-grey data-md-color-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/fire1ce/3os.org/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> fire1ce/3os.org </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../guides/better-terminal-experience/ class=md-tabs__link> Guides </a> </li> <li class=md-tabs__item> <a href=../../../linux/general-snippets/ class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../../mac-os/applications-tweaks/ class=md-tabs__link> macOS </a> </li> <li class=md-tabs__item> <a href=../../snippets/ class="md-tabs__link md-tabs__link--active"> Raspberry Pi </a> </li> <li class=md-tabs__item> <a href=../../../development/docker/cli-commands/ class=md-tabs__link> Development </a> </li> <li class=md-tabs__item> <a href=../../../windows/snippets/ class=md-tabs__link> Windows </a> </li> <li class=md-tabs__item> <a href=../../../penetration-testing/kali-linux/ class=md-tabs__link> Penetration Testing </a> </li> <li class=md-tabs__item> <a href=../../../markdown-cheatsheet/welcome/ class=md-tabs__link> Markdown CheatSheet </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=3os class="md-nav__button md-logo" aria-label=3os data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 2.05c5.05.5 9 4.77 9 9.95 0 1.45-.32 2.83-.88 4.07l-2.62-1.53c.32-.79.5-1.64.5-2.54 0-3.53-2.61-6.43-6-6.92V2.05M12 19c2.21 0 4.17-1 5.45-2.62l2.6 1.53A9.97 9.97 0 0 1 12 22C6.47 22 2 17.5 2 12a9.99 9.99 0 0 1 9-9.95v3.03C7.61 5.57 5 8.47 5 12a7 7 0 0 0 7 7m0-13a6 6 0 0 1 6 6c0 2.97-2.16 5.44-5 5.92v-3.09c1.17-.41 2-1.52 2-2.83a3 3 0 0 0-3-3l-.55.05-1.54-2.67C10.56 6.13 11.26 6 12 6m-6 6c0-1.86.85-3.5 2.18-4.62l1.54 2.67C9.27 10.57 9 11.26 9 12c0 1.31.83 2.42 2 2.83v3.09c-2.84-.48-5-2.95-5-5.92z"/></svg> </a> 3os </label> <div class=md-nav__source> <a href=https://github.com/fire1ce/3os.org/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> fire1ce/3os.org </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1> Guides <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Guides data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/better-terminal-experience/ class=md-nav__link> Better Terminal Experience </a> </li> <li class=md-nav__item> <a href=../../../guides/gmailMarkAsRead/ class=md-nav__link> Gmail Mark Archived Mail as Read </a> </li> <li class=md-nav__item> <a href=../../../guides/pihole_dns/ class=md-nav__link> Pi-hole as DNS Server with DNS over HTTPS (DOH) Based on Docker Containers </a> </li> <li class=md-nav__item> <a href=../../../guides/usefulLinks_Tools/ class=md-nav__link> Useful Links & Tools </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_5 type=checkbox id=__nav_1_5> <label class=md-nav__link for=__nav_1_5> Proxmox <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Proxmox data-md-level=2> <label class=md-nav__title for=__nav_1_5> <span class="md-nav__icon md-icon"></span> Proxmox </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/proxmox/pgu-passthrough-to-vm/ class=md-nav__link> GPU Passthrough to VM </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_6 type=checkbox id=__nav_1_6> <label class=md-nav__link for=__nav_1_6> Synology <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Synology data-md-level=2> <label class=md-nav__title for=__nav_1_6> <span class="md-nav__icon md-icon"></span> Synology </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/synology/Install-oh-my-zsh/ class=md-nav__link> Install zsh and oh-my-zsh </a> </li> <li class=md-nav__item> <a href=../../../guides/synology/Installing-vm-tools-on-virtual-machine/ class=md-nav__link> Installing VM Tools on Virtual Machine </a> </li> <li class=md-nav__item> <a href=../../../guides/synology/allow-ssh-with-rsa-key/ class=md-nav__link> Allow SSH With RSA Key </a> </li> <li class=md-nav__item> <a href=../../../guides/synology/auto-dsm-config-backup/ class=md-nav__link> Auto DSM Config Backup </a> </li> <li class=md-nav__item> <a href=../../../guides/synology/disable-dms-listening-on-80-443-ports/ class=md-nav__link> Disable DSM Listening on 80,443 Ports </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_7 type=checkbox id=__nav_1_7> <label class=md-nav__link for=__nav_1_7> Tools <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tools data-md-level=2> <label class=md-nav__title for=__nav_1_7> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/tools/htpasswd-generator/ class=md-nav__link> htpasswd Password Generator </a> </li> <li class=md-nav__item> <a href=../../../guides/tools/wifiQrGenerator/ class=md-nav__link> Wifi QR Image Generator </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_8 type=checkbox id=__nav_1_8> <label class=md-nav__link for=__nav_1_8> Ubiquiti <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Ubiquiti data-md-level=2> <label class=md-nav__title for=__nav_1_8> <span class="md-nav__icon md-icon"></span> Ubiquiti </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/ubiquiti/edge-router/ class=md-nav__link> EdgeRouter </a> </li> <li class=md-nav__item> <a href=../../../guides/ubiquiti/udm-pro/ class=md-nav__link> UDM PRO </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_9 type=checkbox id=__nav_1_9> <label class=md-nav__link for=__nav_1_9> Privet <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Privet data-md-level=2> <label class=md-nav__title for=__nav_1_9> <span class="md-nav__icon md-icon"></span> Privet </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/privet/kali.3os.re/ class=md-nav__link> kali.3os.re </a> </li> <li class=md-nav__item> <a href=../../../guides/privet/noc.3os.re/ class=md-nav__link> noc.3os.re </a> </li> <li class=md-nav__item> <a href=../../../guides/privet/oscar.3os.re/ class=md-nav__link> oscar.3os.re </a> </li> <li class=md-nav__item> <a href=../../../guides/privet/port.3os.re/ class=md-nav__link> port.3os.re </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/general-snippets/ class=md-nav__link> General Snippets </a> </li> <li class=md-nav__item> <a href=../../../linux/files-handling/ class=md-nav__link> Files Handling </a> </li> <li class=md-nav__item> <a href=../../../linux/locales-time-zone/ class=md-nav__link> Locales & Timezone </a> </li> <li class=md-nav__item> <a href=../../../linux/lvm-partitions/ class=md-nav__link> LVM Partitions </a> </li> <li class=md-nav__item> <a href=../../../linux/memory-swap/ class=md-nav__link> Memory & Swap </a> </li> <li class=md-nav__item> <a href=../../../linux/smb-mount-autofs/ class=md-nav__link> SMB Mount With autofs </a> </li> <li class=md-nav__item> <a href=../../../linux/ssh-hardening-with-rsa-keys/ class=md-nav__link> SSH Hardening with RSA Keys </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_8 type=checkbox id=__nav_2_8> <label class=md-nav__link for=__nav_2_8> Ubuntu & Debian <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ubuntu & Debian" data-md-level=2> <label class=md-nav__title for=__nav_2_8> <span class="md-nav__icon md-icon"></span> Ubuntu & Debian </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/ubuntu-debian/general-snippets/ class=md-nav__link> General Snippets </a> </li> <li class=md-nav__item> <a href=../../../linux/ubuntu-debian/unattended-upgrades/ class=md-nav__link> Unattended Upgrades </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_9 type=checkbox id=__nav_2_9> <label class=md-nav__link for=__nav_2_9> Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Services data-md-level=2> <label class=md-nav__title for=__nav_2_9> <span class="md-nav__icon md-icon"></span> Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/services/apache/ class=md-nav__link> Apache </a> </li> <li class=md-nav__item> <a href=../../../linux/services/cpanel/ class=md-nav__link> cPanel & WHM </a> </li> <li class=md-nav__item> <a href=../../../linux/services/csf/ class=md-nav__link> CSF Firewall </a> </li> <li class=md-nav__item> <a href=../../../linux/services/esxi/ class=md-nav__link> ESXi </a> </li> <li class=md-nav__item> <a href=../../../linux/services/nginx/ class=md-nav__link> Nginx </a> </li> <li class=md-nav__item> <a href=../../../linux/services/plesk/ class=md-nav__link> Plesk </a> </li> <li class=md-nav__item> <a href=../../../linux/services/postfix/ class=md-nav__link> Postfix </a> </li> <li class=md-nav__item> <a href=../../../linux/services/sophos/ class=md-nav__link> Sophos Firewall </a> </li> <li class=md-nav__item> <a href=../../../linux/services/wordpress/ class=md-nav__link> WordPress </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> macOS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=macOS data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> macOS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mac-os/applications-tweaks/ class=md-nav__link> Applications Tweaks </a> </li> <li class=md-nav__item> <a href=../../../mac-os/pythonTheRightWay/ class=md-nav__link> How to Install and use Python on MacOS the Right Way </a> </li> <li class=md-nav__item> <a href=../../../mac-os/system-tweaks/ class=md-nav__link> System Tweaks </a> </li> <li class=md-nav__item> <a href=../../../mac-os/ui-tweaks/ class=md-nav__link> UI Tweaks </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5> Homebrew <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Homebrew data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Homebrew </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mac-os/homebrew/brewup/ class=md-nav__link> BrewUp - macOS Auto Update Homebrew </a> </li> <li class=md-nav__item> <a href=../../../mac-os/homebrew/homebrew-snippets/ class=md-nav__link> Homebrew Snippets </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Raspberry Pi <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Raspberry Pi" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Raspberry Pi </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../snippets/ class=md-nav__link> Snippets </a> </li> <li class=md-nav__item> <a href=../../docker-raspberrypi/ class=md-nav__link> Docker and Docker-compose on Raspberry Pi </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3 checked> <label class=md-nav__link for=__nav_4_3> Guides <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Guides data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../3g-modem-host/ class=md-nav__link> 3g Modem Host Configuration </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> TorPi - Raspberry Pi Tor Access Point <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> TorPi - Raspberry Pi Tor Access Point </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#update-this-guide-is-deprecated-moved-to-torbox class=md-nav__link> Update: This Guide Is Deprecated - Moved to TorBox </a> </li> <li class=md-nav__item> <a href=#installing-headless-minimal-raspberry-pi-os class=md-nav__link> Installing Headless Minimal Raspberry Pi OS </a> </li> <li class=md-nav__item> <a href=#raspap-wifi-configuration-web-portal-installation class=md-nav__link> RaspAP WiFi Configuration Web Portal Installation </a> </li> <li class=md-nav__item> <a href=#tor-service class=md-nav__link> Tor Service </a> </li> <li class=md-nav__item> <a href=#configure-iptables-firewall-rules class=md-nav__link> Configure iptables firewall rules </a> </li> <li class=md-nav__item> <a href=#testing class=md-nav__link> Testing </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> Projects <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Projects data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../projects/magic-mirror/ class=md-nav__link> Magic Mirror </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Development <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Development data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_1 type=checkbox id=__nav_5_1> <label class=md-nav__link for=__nav_5_1> Docker <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Docker data-md-level=2> <label class=md-nav__title for=__nav_5_1> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../development/docker/cli-commands/ class=md-nav__link> Docker Cli Commands </a> </li> <li class=md-nav__item> <a href=../../../development/docker/purging-and-cleaning/ class=md-nav__link> Purge Unused or Dangling Images </a> </li> <li class=md-nav__item> <a href=../../../development/docker/ssh-to-docker-container/ class=md-nav__link> SSH to Docker Container </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2> Git <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Git data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Git </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../development/git/git/ class=md-nav__link> Git Cli Commands </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_3 type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3> Node npm <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Node npm" data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Node npm </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../development/node-npm/npm/ class=md-nav__link> NPM & Node.js Cli Commands </a> </li> <li class=md-nav__item> <a href=../../../development/node-npm/pm2/ class=md-nav__link> PM2 - Node.js Process Manager </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_4 type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4> Python <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../development/python/pip/ class=md-nav__link> Pip Python Package Manager </a> </li> <li class=md-nav__item> <a href=../../../development/python/python/ class=md-nav__link> Python Cli Commands </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5 type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5> Ruby <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Ruby data-md-level=2> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Ruby </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../development/ruby/ruby/ class=md-nav__link> Ruby Cli Commands </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Windows <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Windows data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Windows </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../windows/snippets/ class=md-nav__link> Snippets </a> </li> <li class=md-nav__item> <a href=../../../windows/useful-software/ class=md-nav__link> Useful Software </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_3 type=checkbox id=__nav_6_3> <label class=md-nav__link for=__nav_6_3> Guides <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Guides data-md-level=2> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../windows/guides/declare-locations/ class=md-nav__link> Declare Locations as "Inside Your Local Network" </a> </li> <li class=md-nav__item> <a href=../../../windows/guides/email-from-task-scheduler/ class=md-nav__link> Send Emails From The Windows Task Scheduler </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Penetration Testing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Penetration Testing" data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Penetration Testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../penetration-testing/kali-linux/ class=md-nav__link> Kali Linux </a> </li> <li class=md-nav__item> <a href=../../../penetration-testing/vmware-fusion/ class=md-nav__link> VMware Fusion </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7_3 type=checkbox id=__nav_7_3> <label class=md-nav__link for=__nav_7_3> Android <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Android data-md-level=2> <label class=md-nav__title for=__nav_7_3> <span class="md-nav__icon md-icon"></span> Android </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../penetration-testing/android/apktool/ class=md-nav__link> Apktool </a> </li> <li class=md-nav__item> <a href=../../../penetration-testing/android/frida-server/ class=md-nav__link> Frida Server for SSL Pinning Bypass </a> </li> <li class=md-nav__item> <a href=../../../penetration-testing/android/links/ class=md-nav__link> Useful Android PT Application </a> </li> <li class=md-nav__item> <a href=../../../penetration-testing/android/mobsf/ class=md-nav__link> Mobile Security Framework (MobSF) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7_4 type=checkbox id=__nav_7_4> <label class=md-nav__link for=__nav_7_4> Cheatsheets <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Cheatsheets data-md-level=2> <label class=md-nav__title for=__nav_7_4> <span class="md-nav__icon md-icon"></span> Cheatsheets </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../penetration-testing/cheatsheets/cli-commands-collation/ class=md-nav__link> Cli Commands Collation </a> </li> <li class=md-nav__item> <a href=../../../penetration-testing/cheatsheets/gobuster-cheatsheet/ class=md-nav__link> Gobuster CheatSheet </a> </li> <li class=md-nav__item> <a href=../../../penetration-testing/cheatsheets/nmap-cheatsheet/ class=md-nav__link> Nmap CheatSheet </a> </li> <li class=md-nav__item> <a href=../../../penetration-testing/cheatsheets/xss-cheatsheet/ class=md-nav__link> XSS CheatSheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7_5 type=checkbox id=__nav_7_5> <label class=md-nav__link for=__nav_7_5> Tools <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tools data-md-level=2> <label class=md-nav__title for=__nav_7_5> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../penetration-testing/tools/clickjacking/ class=md-nav__link> Clickjacking Test Page </a> </li> <li class=md-nav__item> <a href=../../../penetration-testing/tools/idd-generator/ class=md-nav__link> IID Generator & Validator </a> </li> <li class=md-nav__item> <a href=../../../penetration-testing/tools/links/ class=md-nav__link> Tools Links </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Markdown CheatSheet <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Markdown CheatSheet" data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Markdown CheatSheet </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/welcome/ class=md-nav__link> Welcome </a> </li> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/headings/ class=md-nav__link> Headings </a> </li> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/text-highlighting/ class=md-nav__link> Text Highlighting </a> </li> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/line-breaks/ class=md-nav__link> Line Breaks </a> </li> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/lists/ class=md-nav__link> Lists </a> </li> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/tables/ class=md-nav__link> Tables </a> </li> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/links/ class=md-nav__link> Links </a> </li> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/images/ class=md-nav__link> Images </a> </li> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/code-blocks/ class=md-nav__link> Code Blocks </a> </li> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/admonition/ class=md-nav__link> Admonition </a> </li> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/block-quotes/ class=md-nav__link> Block Quotes </a> </li> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/icons/ class=md-nav__link> Icons </a> </li> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/emoji/ class=md-nav__link> Emojis List </a> </li> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/embed-external-sources/ class=md-nav__link> Embedding External Sources </a> </li> <li class=md-nav__item> <a href=../../../markdown-cheatsheet/meta-data/ class=md-nav__link> Metadata </a> </li> </ul> </nav> </li> </ul> </nav></div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#update-this-guide-is-deprecated-moved-to-torbox class=md-nav__link> Update: This Guide Is Deprecated - Moved to TorBox </a> </li> <li class=md-nav__item> <a href=#installing-headless-minimal-raspberry-pi-os class=md-nav__link> Installing Headless Minimal Raspberry Pi OS </a> </li> <li class=md-nav__item> <a href=#raspap-wifi-configuration-web-portal-installation class=md-nav__link> RaspAP WiFi Configuration Web Portal Installation </a> </li> <li class=md-nav__item> <a href=#tor-service class=md-nav__link> Tor Service </a> </li> <li class=md-nav__item> <a href=#configure-iptables-firewall-rules class=md-nav__link> Configure iptables firewall rules </a> </li> <li class=md-nav__item> <a href=#testing class=md-nav__link> Testing </a> </li> </ul> </nav></div> <!-- donation section --> <div class=donation> <h3>Support us</h3> <form method=get type=buymeacoffee target=_blank action=https://www.buymeacoffee.com/fire1ce> <button class=donate-button-buymeacoffee type=submit></button> </form> <form method=post type=submit target=_blank action="https://www.paypal.com/donate/?hosted_button_id=Y5NSXQQ6VPSK6&Z3JncnB0="> <button class=donate-button-paypal type=submit></button> </form> <form method=get type=patreon target=_blank action=https://www.patreon.com/fire1ce> <button class=donate-button-patreon type=submit></button> </form> </div> <!-- donation end --> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/fire1ce/3os.org/edit/master/docs/raspberry-pi/guides/tor-pi.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=torpi-raspberry-pi-tor-access-point>TorPi - Raspberry Pi Tor Access Point<a class=headerlink href=#torpi-raspberry-pi-tor-access-point title="Permanent link">&para;</a></h1> <div style="margin:0 auto"> <img src=/assets/images/raspberry-pi/torPi/networkDiagram.png alt="Tor-Pi Network Flow"> </div> <div style="width:80%; margin:0 auto"> <img src=/assets/images/raspberry-pi/torPi/torPi.jpg alt="TorPi - Raspberry Pi Tor Access Point"> </div> <!-- prettier-ignore-start --> <div class="admonition note"> <p class=admonition-title>Totally Wireless TorPi <img alt=👆 class=twemoji src=https://twemoji.maxcdn.com/v/latest/svg/1f446.svg title=:point_up_2:></p> <p><a href=https://amzn.to/374jde5 target=_blank>Raspberry 2 Model B</a><br> 2x <a href=https://amzn.to/33V42lm target=_blank>Edimax N150 WiFi USB Adapters</a><br> <a href=https://amzn.to/33TPgLQ target=_blank>Miracase 5x 5000mAh Power Bank</a> </p> </div> <!-- prettier-ignore-end --> <p><strong>Hardware Support List:</strong></p> <table> <thead> <tr> <th><strong>Raspberry Model</strong></th> <th><strong>Cable to WiFi</strong></th> <th><strong>Cable/WiFi to WiFi</strong></th> </tr> </thead> <tbody> <tr> <td>Raspberry 1</td> <td>1 WiFi USB Adapters</td> <td>2x WiFi USB Adapters</td> </tr> <tr> <td>Raspberry 2</td> <td>1 WiFi USB Adapters</td> <td>2x WiFi USB Adapters</td> </tr> <tr> <td><a href=https://amzn.to/2SSqQMz target=_blank>Raspberry 3</a></td> <td>---</td> <td>1 WiFi USB Adapters</td> </tr> <tr> <td><a href=https://amzn.to/3186kvJ target=_blank>Raspberry 4</a></td> <td>---</td> <td>1 WiFi USB Adapters</td> </tr> </tbody> </table> <ul> <li><strong>Native Wifi Chipset Support</strong><ul> <li>Realtek 8188 (rtl8188cus)</li> <li>MediaTek RT5370</li> </ul> </li> </ul> <h2 id=update-this-guide-is-deprecated-moved-to-torbox>Update: This Guide Is Deprecated - Moved to <a href=https://www.torbox.ch/ target=_blank>TorBox</a><a class=headerlink href=#update-this-guide-is-deprecated-moved-to-torbox title="Permanent link">&para;</a></h2> <p><strong>Use <a href=https://www.torbox.ch/ target=_blank>TorBox</a> Project</strong></p> <p>If you still need information form the original guide is hidden below:</p> <details><summary>Deprecated Guide Archive</summary><h2 id=installing-headless-minimal-raspberry-pi-os>Installing Headless Minimal Raspberry Pi OS<a class=headerlink href=#installing-headless-minimal-raspberry-pi-os title="Permanent link">&para;</a></h2> <p>Download <strong>Raspberry Pi OS Minimal</strong> image from: <a href=https://www.raspberrypi.org/downloads/raspberry-pi-os/ target=_blank title="Raspberry Pi OS Download">raspberrypi.org</a> It's a headless os - <strong>Without GUI</strong> <div style="width:80%; margin:0 auto"> <img src=/assets/images/raspberry-pi/torPi/rasberryPiOsMinimal.png alt=TorPi> </div> Burn <strong>Raspberry Pi OS Minimal</strong> image to SD-Card that will be used in this project for TorPi.<br> Since we don't won't to use external screen or keyboard, we need to allow an SSH access to the Raspberry Pi OS on the first boot. After we created our bootable SD card we need to mount it and add a file called <strong>“ssh”</strong> inside a boot partition.<br> This will enable and start ssh daemon on pi at boot. <div style="width:40%; margin:0 auto"> <img src=/assets/images/raspberry-pi/torPi/ssh_file.png alt=TorPi> </div> To continue the setup we will need a Ethernet Cable with DHCP and Internet Connection.<br> Insert the SD card and the Ethernet cable and boot your pi by connecting power.<br> At this point the pi should boot the new OS from the SD card and get a DHCP address.<br> Find the new address your pi just got from your dhcp server. You can do it inside your router's ui or use nmap tp find it on the network.<br> If you can't find the new address you can allows connect it to external screen and keyboard - use default credentials to login and 'ip addr' command SSH to the Raspberry Pi Default credentials: - User: <strong>pi</strong> - Password: <strong>raspberry</strong> <div class=highlight><pre><span></span><code>ssh pi@192.168.1.111
</code></pre></div> Change the default password for the Pi user <div class=highlight><pre><span></span><code>passwd
</code></pre></div> Let's run system updates and cleanup <div class=highlight><pre><span></span><code>sudo apt update <span class=o>&amp;&amp;</span> sudo apt full-upgrade -y
</code></pre></div> <em>Optional</em>: Use simple: <a href=https://3os.org/linux/ubuntu/#debianubunturaspberrypios-_update_script target=_blank title="update script){target=_blank} _Optional_: [SSH Hardening with RSA Keys](https://3os.org/linux/SSH_Service_Security/#ssh_service_security 'SSH Hardening with RSA Keys">Update Script</a> <em>Optional</em>: <a href=https://3os.org/linux/general/general/#fix_locales_fix_bash_local_error target=_blank title="Fix bash local error">Fix bash local error</a> <em>Optional</em>: <a href=https://3os.org/linux/general/general/#set_system_time_with_time_zone_timedatectl_ntp target=_blank title="Set System Time With NTP">Set System Time With NTP</a> <em>Optional</em> <a href=https://3os.org/guides/BetterTerminal/#linux_installation target=_blank title="Install Oh My Zsh">Install Oh My Zsh</a> Follow this to <a href=https://3os.org/raspberry-pi/piGeneral/#disable_ipv6_on_raspberry_pi_os target=_blank title="Disable IPv6 on Raspberry Pi Os">Disable IPv6 on Raspberry Pi Os</a> Change the Hostname to 'torPi' or any one you like <div class=highlight><pre><span></span><code>sudo raspi-config
</code></pre></div> Select: 2.Network Options -&gt; N1 Hostname <div class=highlight><pre><span></span><code>torPi
</code></pre></div> Install some usefully utils if missing <div class=highlight><pre><span></span><code>sudo apt install -y net-tools curl wget traceroute htop
<span class=sb>``</span>
Reboot The Pi <span class=k>for</span> the first <span class=nb>time</span>
<span class=sb>```</span>bash
sudo reboot
</code></pre></div></p> <h2 id=raspap-wifi-configuration-web-portal-installation>RaspAP WiFi Configuration Web Portal Installation<a class=headerlink href=#raspap-wifi-configuration-web-portal-installation title="Permanent link">&para;</a></h2> <p>Many thanks to <a href=https://github.com/billz target=_blank title=github.com/billz>billz</a> for his project <a href=https://raspap.com/ target=_blank title=https://raspap.com)>RaspAP</a> We will use <a href=https://github.com/billz/ title=https://github.com/billz/ target=_blank>raspap-webgui</a> package to Manage our WiFi connections with simple Web-ui Let's use the <strong>Quick Interactive RaspAP Install</strong> script <div class=highlight><pre><span></span><code>curl -sL https://install.raspap.com <span class=p>|</span> bash
</code></pre></div> <div class=highlight><pre><span></span><code>lighttpd root: /var/www/html? - Y 
Complete installation with these values? - Y
Enable HttpOnly <span class=k>for</span> session cookies <span class=o>(</span>Recommended<span class=o>)</span>? - Y
Enable RaspAP control service <span class=o>(</span>Recommended<span class=o>)</span>? <span class=o>=</span> Y
Install ad blocking and <span class=nb>enable</span> list management? - n
Install OpenVPN and <span class=nb>enable</span> client configuration? - n
The system needs to be rebooted as a final step. Reboot now? - Y
</code></pre></div> After the reboot at the end of the installation the wireless network will be configured as an access point as follows:</p> <h3 id=default-ssid-information>Default SSID Information<a class=headerlink href=#default-ssid-information title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>SSID: raspi-webgui  
IP address: <span class=m>10</span>.3.141.1  
DHCP range: <span class=m>10</span>.3.141.50 to <span class=m>10</span>.3.141.255  
Password: ChangeMe  
</code></pre></div> <h3 id=default-web-ui-information>Default WEB-UI Information<a class=headerlink href=#default-web-ui-information title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>Web-Ui: <span class=o>[</span>http://10.3.141.1/<span class=o>](</span>http://10.3.141.1/<span class=o>){</span><span class=nv>target</span><span class=o>=</span>_blank<span class=o>}</span>  
Username: admin  
Password: secret  
For this guide we will use the default gateway address of **10.3.141.1** and the gateway **DHCP range**
Login to the Web-Ui: <span class=o>[</span>http://10.3.141.1/<span class=o>](</span>http://10.3.141.1/<span class=o>){</span><span class=nv>target</span><span class=o>=</span><span class=se>\_</span>blank<span class=o>}</span>.
</code></pre></div> <h3 id=warning>warning<a class=headerlink href=#warning title="Permanent link">&para;</a></h3> <p>Change the Default web-ui Credentials <div style="width:80%; margin:0 auto"> <img src=/assets/images/raspberry-pi/torPi/webui-authentication.png alt=webui-authentication> </div></p> <h3 id=configuration-with-one-wireless-interface>Configuration with One Wireless Interface<a class=headerlink href=#configuration-with-one-wireless-interface title="Permanent link">&para;</a></h3> <p><div class=highlight><pre><span></span><code>If you raspberry pi as only **one wireless** interface the default RaspAP configuration of the host sport is great.  
The only think you should to <span class=k>in</span> the interface is to change the SSD, PSK
</code></pre></div> <div style="margin:0 auto"> <img src=/assets/images/raspberry-pi/torPi/wlan0_hotspot.png alt="wlan0 hotspot"> </div></p> <h3 id=configuration-with-two-wireless-interface>Configuration with Two Wireless Interface<a class=headerlink href=#configuration-with-two-wireless-interface title="Permanent link">&para;</a></h3> <p>If you raspberry pi as only <strong>two wireless</strong> interface we need to set<br> <strong>wlan1 as Hotspot</strong><br> <strong>wlan0 as WiFi Client</strong><br> Set the Hotspot with interface <strong>wlan1</strong> <div style="width:80%; margin:0 auto"> <img src=/assets/images/raspberry-pi/torPi/wlan1_hotspost.png alt="wlan1 hotspot"> </div> Connect to known WiFi make sure the interface is set to wlan0 <div style="width:80%; margin:0 auto"> <img src=/assets/images/raspberry-pi/torPi/wlan0_wifiClient.png alt="wlan0 hotspot"> </div></p> <h2 id=tor-service>Tor Service<a class=headerlink href=#tor-service title="Permanent link">&para;</a></h2> <p>Install tor service <div class=highlight><pre><span></span><code>sudo apt install -y tor
</code></pre></div> delete the default torrc config <div class=highlight><pre><span></span><code>sudo rm -rf /etc/tor/torrc
</code></pre></div> Create new torrc and edit it <div class=highlight><pre><span></span><code>sudo nano /etc/tor/torrc
</code></pre></div> Add the lines below to torrc <div class=highlight><pre><span></span><code>VirtualAddrNetwork <span class=m>10</span>.192.0.0/10
AutomapHostsSuffixes .onion,.exit
AutomapHostsOnResolve <span class=m>1</span>
TransPort <span class=m>10</span>.3.141.1:9040
TransListenAddress <span class=m>10</span>.3.141.1
DNSPort <span class=m>10</span>.3.141.1:53
DNSListenAddress <span class=m>10</span>.3.141.1
</code></pre></div> <strong>Optional</strong> add this to rotate the exit node every 10 seconds <div class=highlight><pre><span></span><code>CircuitBuildTimeout <span class=m>10</span>
LearnCircuitBuildTimeout <span class=m>0</span>
MaxCircuitDirtiness <span class=m>10</span>
</code></pre></div> <div style="width:60%; margin:0 auto"> <img src=/assets/images/raspberry-pi/torPi/torrc.png alt=torrc> </div> Start and enable Tor Service a boot <div class=highlight><pre><span></span><code>sudo systemctl start tor.service
sudo systemctl <span class=nb>enable</span> tor.service
</code></pre></div> make sure the tor service started currently as in screen bellow: <div class=highlight><pre><span></span><code>sudo netstat -plnt
</code></pre></div> <div style="margin:0 auto"> <img src=/assets/images/raspberry-pi/torPi/netstat_tor.png alt="netstat tor"> </div></p> <h3 id=bug>Bug<a class=headerlink href=#bug title="Permanent link">&para;</a></h3> <p><div class=highlight><pre><span></span><code>There is a bug that Tor Service won<span class=err>&#39;</span>t load at boot because of all the interfaces changes.  
The solution is to install **Monit**. Monit Will load the tor Tor Service as soon as it can.  
It will also reload it <span class=k>if</span> it will crash
<span class=c1>### Install Monit</span>
<span class=sb>```</span>bash
sudo apt install monit
</code></pre></div> Edit Monit Config <div class=highlight><pre><span></span><code>sudo nano /etc/monit/monitrc
</code></pre></div> Add those lines to the end of the config: <div class=highlight><pre><span></span><code>check process gdm with pidfile /var/run/tor/tor.pid
   start <span class=nv>program</span> <span class=o>=</span> <span class=s2>&quot;/etc/init.d/tor start&quot;</span>
   stop <span class=nv>program</span> <span class=o>=</span> <span class=s2>&quot;/etc/init.d/tor stop&quot;</span>
</code></pre></div> Reload and add Monit to startup: <div class=highlight><pre><span></span><code>sudo systemctl restart monit
sudo systemctl <span class=nb>enable</span> monit
</code></pre></div></p> <h3 id=warning_1>warning<a class=headerlink href=#warning_1 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>Be Patient!!!  
With my Pi2 full startup may take up to <span class=m>3</span> minutes
</code></pre></div> <h2 id=configure-iptables-firewall-rules>Configure iptables firewall rules<a class=headerlink href=#configure-iptables-firewall-rules title="Permanent link">&para;</a></h2> <p>Its time to firewall the traffic to specific port - Allow port 22,80 from any interface to allow access to ssh and the web-ui - Route all DNS traffic from wlan1 to internal port 53 - Route all other wlan1 tcp traffic via tor proxy on port 9040</p> <h3 id=bug_1>Bug<a class=headerlink href=#bug_1 title="Permanent link">&para;</a></h3> <p><div class=highlight><pre><span></span><code>There is a bug that Raspap overwrites iptables rules at boot.  
The solution is to install make a bash script with iptables rules  
to Run on startup with delay of <span class=m>30</span> seconds.
</code></pre></div> lets create the script <strong>iptablesOnBoot.sh</strong> <div class=highlight><pre><span></span><code>sudo nano /iptablesOnBoot.sh
</code></pre></div> Copy One of the following config files:</p> <h3 id=config-for-one-wireless-interface-with-hotspot-on-wlan0>Config for One Wireless Interface with Hotspot on wlan0<a class=headerlink href=#config-for-one-wireless-interface-with-hotspot-on-wlan0 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=ch>#!/bin/bash</span>
sudo iptables -F <span class=o>&amp;&amp;</span> sudo iptables -t nat -F
sudo iptables -t nat -A PREROUTING -p tcp --dport <span class=m>22</span> -j REDIRECT --to-ports <span class=m>22</span>
sudo iptables -t nat -A PREROUTING -p tcp --dport <span class=m>80</span> -j REDIRECT --to-ports <span class=m>80</span>
sudo iptables -t nat -A PREROUTING -i wlan0 -p udp --dport <span class=m>53</span> -j REDIRECT --to-ports <span class=m>53</span>
sudo iptables -t nat -A PREROUTING -i wlan0 -p tcp --syn -j REDIRECT --to-ports <span class=m>9040</span>
sudo iptables -t nat -A POSTROUTING -j MASQUERADE
sudo iptables -t nat -A POSTROUTING -s <span class=m>192</span>.168.50.0/24 ! -d <span class=m>192</span>.168.50.0/24 -j MASQUERADE
sudo sh -c <span class=s2>&quot;iptables-save &gt; /etc/iptables.ipv4.nat&quot;</span>
</code></pre></div> <h3 id=config-for-two-wireless-interface-with-hotspot-on-wlan1>Config for Two Wireless Interface with Hotspot on wlan1<a class=headerlink href=#config-for-two-wireless-interface-with-hotspot-on-wlan1 title="Permanent link">&para;</a></h3> <p><div class=highlight><pre><span></span><code><span class=ch>#!/bin/bash</span>
sudo iptables -F <span class=o>&amp;&amp;</span> sudo iptables -t nat -F
sudo iptables -t nat -A PREROUTING -p tcp --dport <span class=m>22</span> -j REDIRECT --to-ports <span class=m>22</span>
sudo iptables -t nat -A PREROUTING -p tcp --dport <span class=m>80</span> -j REDIRECT --to-ports <span class=m>80</span>
sudo iptables -t nat -A PREROUTING -i wlan1 -p udp --dport <span class=m>53</span> -j REDIRECT --to-ports <span class=m>53</span>
sudo iptables -t nat -A PREROUTING -i wlan1 -p tcp --syn -j REDIRECT --to-ports <span class=m>9040</span>
sudo iptables -t nat -A POSTROUTING -j MASQUERADE
sudo iptables -t nat -A POSTROUTING -s <span class=m>192</span>.168.50.0/24 ! -d <span class=m>192</span>.168.50.0/24 -j MASQUERADE
sudo sh -c <span class=s2>&quot;iptables-save &gt; /etc/iptables.ipv4.nat&quot;</span>
</code></pre></div> Make the script executable <div class=highlight><pre><span></span><code>sudo chmod +x /iptablesOnBoot.sh
</code></pre></div> Now lets add it to Crontab to execute after login <div class=highlight><pre><span></span><code>sudo crontab -e
</code></pre></div> Add to the end of crontav file <div class=highlight><pre><span></span><code>@reboot sleep <span class=m>20</span> <span class=o>&amp;&amp;</span> /iptablesOnBoot.sh
</code></pre></div> After reboot iptables rules should be like this <div class=highlight><pre><span></span><code>sudo iptables -t nat -L
</code></pre></div> <div style="margin:0 auto"> <img src=/assets/images/raspberry-pi/torPi/iptables.png alt=iptables> </div></p> <h2 id=testing>Testing<a class=headerlink href=#testing title="Permanent link">&para;</a></h2> <h3 id=warning_2>warning<a class=headerlink href=#warning_2 title="Permanent link">&para;</a></h3> <p>Be Patient!!!<br> Start up after reboot may take up to 3 minutes for everything to work as it should Well Thats about it, you should be able to connect the the Hotspot and gain tor network.<br> You can test that you are on the Tor network at <a href=https://check.torproject.org/ target=_blank>https://check.torproject.org/</a></p> </details> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">September 2, 2021</span> </small> </div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <!-- Footer --> <footer class=md-footer> <!-- Link to previous and/or next page --> <nav class="md-footer__inner md-grid" aria-label=Footer> <!-- Link to previous page --> <a href=../3g-modem-host/ class="md-footer__link md-footer__link--prev" aria-label="Previous: 3g Modem Host Configuration" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> 3g Modem Host Configuration </div> </div> </a> <!-- Link to next page --> <a href=../../projects/magic-mirror/ class="md-footer__link md-footer__link--next" aria-label="Next: Magic Mirror" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Magic Mirror </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <!-- Footer --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <!-- Copyright and theme information --> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight>Copyright &copy; 3os.org @2018</div> <a href=/sitemap.xml title="Site Map"> Site Map </a> | <a href=/information/privacy-policy/ title="Privacy Policy">Privacy Policy </a> | <a href=/information/cookies-policy title="Cookies Policy">Cookies Policy </a> | <a href=/information/affiliateDisclosure title="Affiliate Disclosure">Affiliate Disclosure </a> | <a href=/information/portfolio title=Portfolio>Portfolio </a> | <a href=/information/license title=License>License </a> </div> <div class=md-footer-social> <a href=https://github.com/fire1ce target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://www.linkedin.com/in/stas-yakobov target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://www.facebook.com/3os.org target=_blank rel=noopener title=www.facebook.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.instant", "navigation.top", "navigation.sections", "search.suggest", "search.highlight", "search.share"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.409db549.min.js", "version": null}</script> <script src=../../../assets/javascripts/bundle.56a63758.min.js></script> </body> </html>